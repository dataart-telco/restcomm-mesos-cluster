series: trusty
services:
  mesos-master:
    charm: local:trusty/mesos-master
    num_units: 1
    expose: true
    constraints: "mem=8G cpu-cores=4 root-disk=12G"
    annotations:
      gui-x: "1140"
      gui-y: "570"
  mesos-slave: 
    charm: local:trusty/mesos-slave
    num_units: 2
    expose: true
    constraints: "mem=4G cpu-cores=2 root-disk=12G"
    annotations: 
      gui-x: "1140"
      gui-y: "950"
  restcomm:
    charm: local:trusty/restcomm
    expose: true
    annotations:
      gui-x: "1170"
      gui-y: "224"
    options:
      sms_proxy: ""
      init_password: "42d8aa7cde9c78c4757862d84620c335"
      voicerss_key: "29b2d893df9f454abbfae94df6cff95b"     
  restcomm-balancer:
    charm: local:trusty/restcomm-loadbalancer
    expose: true
    annotations:
      gui-x: "1170"
      gui-y: "224"
  graylog-agent-restcomm:
    charm: local:trusty/graylog-agent-restcomm
  graylog-restcomm:
    charm: local:trusty/graylog-restcomm
  mysql:
    charm: cs:trusty/mysql-34
    num_units: 1
    expose: true
    constraints: "mem=2G"
    annotations:
      gui-x: "1140"
      gui-y: "-196"
relations:
# restcomm to mesos
  - - restcomm
    - mesos-master
  - - restcomm-balancer
    - mesos-master
  - - restcomm
    - restcomm-balancer    
  - - restcomm:mysql
    - mysql:db
# mesos cluster
  - - mesos-master
    - mesos-slave
# end
  - - graylog-agent-restcomm
    - mesos-master
  - - graylog-restcomm
    - mesos-master
